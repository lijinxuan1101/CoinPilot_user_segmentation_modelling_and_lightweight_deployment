# CoinPilot é¢„æµ‹æœåŠ¡

åŸºäºæœºå™¨å­¦ä¹ çš„ç”¨æˆ·è½¬æ¢é¢„æµ‹ç³»ç»Ÿï¼ŒåŒ…å«FastAPIåç«¯æœåŠ¡å’ŒStreamlitå‰ç«¯ç•Œé¢ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **æœºå™¨å­¦ä¹ ç®¡é“**: ä½¿ç”¨Stacking Classifier (XGBoost + AdaBoost)è¿›è¡Œé¢„æµ‹
- **FastAPIæœåŠ¡**: RESTful APIæä¾›é¢„æµ‹æœåŠ¡
- **Streamlitå®¢æˆ·ç«¯**: ç”¨æˆ·å‹å¥½çš„Webç•Œé¢
- **ç¦»çº¿æ¨¡å¼**: APIä¸å¯ç”¨æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°æœ¬åœ°æ¨¡å‹
- **å®æ—¶é¢„æµ‹**: å³æ—¶æ˜¾ç¤ºé¢„æµ‹ç»“æœå’Œç½®ä¿¡åº¦

## ğŸ“ æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ Li Jinxuan_assignment2.ipynb    # ä¸»è¦notebookæ–‡ä»¶
â”œâ”€â”€ coinpilot_data.csv              # è®­ç»ƒæ•°æ®
â”œâ”€â”€ coinpilot_prediction_pipeline.joblib  # ä¿å­˜çš„æœºå™¨å­¦ä¹ ç®¡é“
â”œâ”€â”€ fastapi_app.py                  # FastAPIåº”ç”¨
â”œâ”€â”€ streamlit_app.py                # Streamlitå®¢æˆ·ç«¯
â”œâ”€â”€ test_prediction.py              # æµ‹è¯•è„šæœ¬
â””â”€â”€ README.md                       # è¯´æ˜æ–‡æ¡£
```

## ğŸ› ï¸ å®‰è£…ä¾èµ–

```bash
pip install numpy pandas scikit-learn xgboost matplotlib fastapi "pydantic<2" uvicorn streamlit joblib requests
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºæœºå™¨å­¦ä¹ ç®¡é“

é¦–å…ˆè¿è¡Œnotebookä¸­çš„ç®¡é“åˆ›å»ºä»£ç ï¼š

```python
# åœ¨notebookä¸­è¿è¡Œ
# è¿™ä¼šåˆ›å»ºå¹¶ä¿å­˜ coinpilot_prediction_pipeline.joblib
```

### 2. å¯åŠ¨FastAPIæœåŠ¡

```bash
python fastapi_app.py
```

æˆ–è€…ä½¿ç”¨uvicornï¼š

```bash
uvicorn fastapi_app:app --host 0.0.0.0 --port 8000 --reload
```

æœåŠ¡å°†åœ¨ http://localhost:8000 å¯åŠ¨

### 3. å¯åŠ¨Streamlitå®¢æˆ·ç«¯

```bash
streamlit run streamlit_app.py
```

å®¢æˆ·ç«¯å°†åœ¨ http://localhost:8501 å¯åŠ¨

### 4. è¿è¡Œæµ‹è¯•

```bash
python test_prediction.py
```

## ğŸ“‹ APIç«¯ç‚¹

### å¥åº·æ£€æŸ¥
```
GET /health
```

### æœåŠ¡ä¿¡æ¯
```
GET /info
```

### é¢„æµ‹è½¬æ¢
```
POST /predict
```

**è¯·æ±‚ä½“ç¤ºä¾‹:**
```json
{
  "age": 30,
  "tenure_months": 12,
  "income_monthly": 5000.0,
  "savings_rate": 0.3,
  "risk_score": 50.0,
  "app_opens_7d": 10,
  "sessions_7d": 15,
  "avg_session_min": 5.0,
  "alerts_opt_in": 1,
  "auto_invest": 1,
  "country": "SG",
  "equity_pct": 40.0,
  "bond_pct": 20.0,
  "cash_pct": 30.0,
  "crypto_pct": 10.0
}
```

**å“åº”ç¤ºä¾‹:**
```json
{
  "prediction": 1,
  "probability": 0.75,
  "confidence": "ä¸­",
  "timestamp": "2024-01-01T12:00:00"
}
```

## ğŸ¯ ä½¿ç”¨è¯´æ˜

### Streamlitç•Œé¢

1. **é…ç½®è®¾ç½®**: åœ¨ä¾§è¾¹æ è®¾ç½®APIåœ°å€å’Œæ¨¡å¼
2. **è¾“å…¥ç”¨æˆ·ä¿¡æ¯**: å¡«å†™æ‰€æœ‰å¿…è¦çš„ç”¨æˆ·ç‰¹å¾
3. **å¼€å§‹é¢„æµ‹**: ç‚¹å‡»"å¼€å§‹é¢„æµ‹"æŒ‰é’®
4. **æŸ¥çœ‹ç»“æœ**: æŸ¥çœ‹é¢„æµ‹ç»“æœã€æ¦‚ç‡å’Œç½®ä¿¡åº¦

### ç‰¹å¾è¯´æ˜

- **åŸºæœ¬ä¿¡æ¯**: å¹´é¾„ã€ä½¿ç”¨æœˆæ•°ã€æœˆæ”¶å…¥ã€å‚¨è“„ç‡ã€é£é™©è¯„åˆ†
- **ä½¿ç”¨è¡Œä¸º**: åº”ç”¨æ‰“å¼€æ¬¡æ•°ã€ä¼šè¯æ¬¡æ•°ã€å¹³å‡ä¼šè¯æ—¶é•¿ã€æé†’è®¾ç½®ã€è‡ªåŠ¨æŠ•èµ„
- **æŠ•èµ„ç»„åˆ**: è‚¡ç¥¨ã€å€ºåˆ¸ã€ç°é‡‘ã€åŠ å¯†è´§å¸æŠ•èµ„æ¯”ä¾‹
- **åœ°ç†ä½ç½®**: å›½å®¶ä»£ç  (SG, MY, TH, ID, PH, VN)

## ğŸ”§ æŠ€æœ¯æ¶æ„

### æœºå™¨å­¦ä¹ ç®¡é“
- **é¢„å¤„ç†**: StandardScaleræ ‡å‡†åŒ–è¿ç»­ç‰¹å¾
- **æ¨¡å‹**: Stacking Classifier (XGBoost + AdaBoost)
- **å…ƒå­¦ä¹ å™¨**: Logistic Regression
- **ç‰¹å¾**: 20ä¸ªç‰¹å¾ï¼ŒåŒ…æ‹¬è¿ç»­ã€äºŒè¿›åˆ¶å’Œåˆ†ç±»ç‰¹å¾

### æœåŠ¡æ¶æ„
```
ç”¨æˆ·è¾“å…¥ â†’ Streamlitç•Œé¢ â†’ FastAPIæœåŠ¡ â†’ æœºå™¨å­¦ä¹ ç®¡é“ â†’ é¢„æµ‹ç»“æœ
                â†“ (å¦‚æœAPIä¸å¯ç”¨)
            æœ¬åœ°ç®¡é“ â†’ é¢„æµ‹ç»“æœ
```

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯ç³»ç»ŸåŠŸèƒ½ï¼š

```bash
python test_prediction.py
```

æµ‹è¯•åŒ…æ‹¬ï¼š
- ç¦»çº¿é¢„æµ‹åŠŸèƒ½
- APIç«¯ç‚¹æµ‹è¯•
- ç«¯åˆ°ç«¯é¢„æµ‹æµç¨‹

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

åŸºäºæµ‹è¯•æ•°æ®çš„æ¨¡å‹æ€§èƒ½ï¼š
- **å‡†ç¡®ç‡**: 69.7%
- **ç²¾ç¡®ç‡**: 72.4%
- **å¬å›ç‡**: 85.6%
- **ROC AUC**: 72.4%

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨**
   - ç¡®ä¿å…ˆè¿è¡Œnotebookä¸­çš„ç®¡é“åˆ›å»ºä»£ç 
   - æ£€æŸ¥ `coinpilot_prediction_pipeline.joblib` æ–‡ä»¶æ˜¯å¦å­˜åœ¨

2. **APIè¿æ¥å¤±è´¥**
   - ç¡®ä¿FastAPIæœåŠ¡æ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥ç«¯å£8000æ˜¯å¦è¢«å ç”¨
   - ä½¿ç”¨ç¦»çº¿æ¨¡å¼ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ

3. **ä¾èµ–åŒ…é—®é¢˜**
   - ç¡®ä¿å®‰è£…äº†æ‰€æœ‰å¿…è¦çš„PythonåŒ…
   - æ£€æŸ¥Pythonç‰ˆæœ¬å…¼å®¹æ€§

### æ—¥å¿—ä¿¡æ¯

- FastAPIæœåŠ¡å¯åŠ¨æ—¶ä¼šæ˜¾ç¤ºæ¨¡å‹åŠ è½½çŠ¶æ€
- Streamlitç•Œé¢ä¼šæ˜¾ç¤ºè¿æ¥çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯
- æµ‹è¯•è„šæœ¬ä¼šæä¾›è¯¦ç»†çš„æµ‹è¯•ç»“æœ

## ğŸ“ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°ç‰¹å¾
1. æ›´æ–° `UserInput` æ¨¡å‹
2. ä¿®æ”¹ `preprocess_input` å‡½æ•°
3. æ›´æ–°Streamlitç•Œé¢
4. é‡æ–°è®­ç»ƒå’Œä¿å­˜ç®¡é“

### ä¿®æ”¹æ¨¡å‹
1. åœ¨notebookä¸­ä¿®æ”¹æ¨¡å‹é…ç½®
2. é‡æ–°è®­ç»ƒç®¡é“
3. ä¿å­˜æ–°çš„ç®¡é“æ–‡ä»¶
4. é‡å¯æœåŠ¡

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦æœ¯ç›®çš„ã€‚

## ğŸ‘¥ ä½œè€…

Li Jinxuan - IS5126 Individual Assignment 2


